<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Challenge - Backbenchers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Orbitron', sans-serif; 
            background: linear-gradient(135deg, #232526 0%, #414345 100%); 
        }
        .challenge-card {
            transition: all 0.3s ease;
        }
        .challenge-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255, 221, 87, 0.2);
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl font-bold text-yellow-300">Team Challenge</h1>
            <div class="flex gap-4">
                <button id="howToPlay" class="px-6 py-2 bg-gray-700 text-white rounded-full font-bold hover:bg-gray-600">How to Play</button>
                <button id="startChallenge" class="px-6 py-2 bg-yellow-400 text-gray-900 rounded-full font-bold hover:bg-yellow-300">Start Challenge</button>
                <a href="../index.html" class="px-6 py-2 bg-gray-700 text-white rounded-full font-bold hover:bg-gray-600">Back to Games</a>
            </div>
        </div>

        <!-- How to Play Modal -->
        <div id="howToPlayModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-gray-800 rounded-lg p-8 max-w-2xl mx-4">
                <h2 class="text-2xl font-bold text-yellow-300 mb-4">How to Play Team Challenge</h2>
                <div class="space-y-4 text-gray-300">
                    <p><span class="text-yellow-200 font-bold">Game Objective:</span></p>
                    <ul class="list-disc list-inside ml-4 space-y-2">
                        <li>Work as a team to solve challenges within the time limit</li>
                        <li>Progress through increasingly difficult levels</li>
                        <li>Earn points for each correct answer</li>
                    </ul>
                    <p><span class="text-yellow-200 font-bold">How to Play:</span></p>
                    <ul class="list-disc list-inside ml-4 space-y-2">
                        <li>Read each challenge carefully</li>
                        <li>Type your answer in the input field</li>
                        <li>Click Submit or press Enter to check your answer</li>
                        <li>Use hints if you're stuck (will not affect score)</li>
                    </ul>
                    <p><span class="text-yellow-200 font-bold">Time Management:</span></p>
                    <ul class="list-disc list-inside ml-4 space-y-2">
                        <li>Each challenge has a 60-second time limit</li>
                        <li>Watch the progress bar for remaining time</li>
                        <li>Work quickly but accurately</li>
                    </ul>
                    <p><span class="text-yellow-200 font-bold">Tips:</span></p>
                    <ul class="list-disc list-inside ml-4 space-y-2">
                        <li>Communicate with your team members</li>
                        <li>Share ideas and strategies</li>
                        <li>Higher levels offer more points</li>
                    </ul>
                </div>
                <button id="closeHowToPlay" class="mt-6 px-6 py-2 bg-yellow-400 text-gray-900 rounded-full font-bold hover:bg-yellow-300">Got it!</button>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Team Stats -->
            <div class="bg-gray-800/80 rounded-lg p-6">
                <h2 class="text-2xl font-bold text-yellow-200 mb-4">Team Stats</h2>
                <div class="space-y-6">
                    <div>
                        <p class="text-gray-400 mb-2">Team Score</p>
                        <p id="teamScore" class="text-4xl font-bold text-yellow-300">0</p>
                    </div>
                    <div>
                        <p class="text-gray-400 mb-2">Challenge Level</p>
                        <p id="challengeLevel" class="text-4xl font-bold text-white">1</p>
                    </div>
                    <div>
                        <p class="text-gray-400 mb-2">Time Remaining</p>
                        <p id="timeRemaining" class="text-4xl font-bold text-yellow-300">60</p>
                    </div>
                </div>
            </div>

            <!-- Challenge Area -->
            <div class="col-span-2 bg-gray-800/80 rounded-lg p-6">
                <h2 class="text-2xl font-bold text-yellow-200 mb-4">Current Challenge</h2>
                <div id="challengeArea" class="space-y-6">
                    <div class="challenge-card bg-gray-700 p-6 rounded-lg">
                        <h3 class="text-xl font-bold text-yellow-200 mb-4">Welcome to Team Challenge!</h3>
                        <p class="text-gray-300">Work together to solve challenges and earn points. Each challenge must be completed within the time limit.</p>
                        <p class="text-yellow-300 mt-4">Click "Start Challenge" to begin!</p>
                    </div>
                </div>
                
                <!-- Progress Bar -->
                <div class="mt-6 bg-gray-700 rounded-full h-4 overflow-hidden">
                    <div id="progressBar" class="progress-bar bg-yellow-400 h-full w-0"></div>
                </div>

                <!-- Answer Area -->
                <div class="mt-6">
                    <input type="text" id="answerInput" class="w-full bg-gray-700 text-white rounded-lg px-4 py-2 mb-4" placeholder="Enter your answer..." disabled>
                    <button id="submitAnswer" class="w-full px-6 py-3 bg-yellow-400 text-gray-900 rounded-full font-bold hover:bg-yellow-300 disabled:opacity-50" disabled>Submit Answer</button>
                </div>
            </div>
        </div>

        <!-- Team Members -->
        <div class="mt-8 bg-gray-800/80 rounded-lg p-6">
            <h2 class="text-2xl font-bold text-yellow-200 mb-4">Team Members</h2>
            <div id="teamMembers" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <!-- Team members will be added here -->
            </div>
        </div>
    </div>

    <script>
        const challenges = [
            {
                question: "Unscramble the word: RLBEOCHNAL",
                answer: "CHALLENGER",
                points: 100,
                hint: "Someone who takes on challenges"
            },
            {
                question: "Solve the pattern: 2, 6, 12, 20, ?",
                answer: "30",
                points: 150,
                hint: "Add an increasing even number each time"
            },
            {
                question: "If a team scores 7 points per challenge and completes 8 challenges, what's their total score?",
                answer: "56",
                points: 200,
                hint: "Multiply the points per challenge by the number of challenges"
            },
            {
                question: "Decode: GRNZ CYNL GBTRGURE",
                answer: "TEAM PLAY TOGETHER",
                points: 250,
                hint: "Each letter is shifted by 13 positions in the alphabet"
            }
        ];

        let currentChallenge = 0;
        let teamScore = 0;
        let challengeLevel = 1;
        let timeRemaining = 60;
        let timer;

        function startChallenge() {
            if (currentChallenge >= challenges.length) {
                alert('Congratulations! You\'ve completed all challenges!');
                return;
            }

            const challenge = challenges[currentChallenge];
            document.getElementById('challengeArea').innerHTML = `
                <div class="challenge-card bg-gray-700 p-6 rounded-lg">
                    <h3 class="text-xl font-bold text-yellow-200 mb-4">Challenge ${currentChallenge + 1}</h3>
                    <p class="text-gray-300 mb-4">${challenge.question}</p>
                    <p class="text-yellow-300">Points: ${challenge.points}</p>
                    <button id="showHint" class="mt-4 text-gray-400 hover:text-yellow-300">Show Hint</button>
                </div>
            `;

            document.getElementById('showHint').addEventListener('click', function() {
                this.textContent = `Hint: ${challenge.hint}`;
                this.disabled = true;
            });

            document.getElementById('answerInput').disabled = false;
            document.getElementById('submitAnswer').disabled = false;
            document.getElementById('startChallenge').disabled = true;
            
            startTimer();
        }

        function startTimer() {
            timeRemaining = 60;
            updateTimer();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimer();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    handleTimeout();
                }
            }, 1000);
        }

        function updateTimer() {
            document.getElementById('timeRemaining').textContent = timeRemaining;
            const progress = (timeRemaining / 60) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function handleTimeout() {
            alert('Time\'s up! Try again.');
            resetChallenge();
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('answerInput').value.trim().toUpperCase();
            const correctAnswer = challenges[currentChallenge].answer.toUpperCase();
            
            if (userAnswer === correctAnswer) {
                teamScore += challenges[currentChallenge].points;
                document.getElementById('teamScore').textContent = teamScore;
                
                currentChallenge++;
                if (currentChallenge % 2 === 0) {
                    challengeLevel++;
                    document.getElementById('challengeLevel').textContent = challengeLevel;
                }
                
                clearInterval(timer);
                alert('Correct! Great teamwork!');
                
                document.getElementById('startChallenge').disabled = false;
                document.getElementById('answerInput').value = '';
                document.getElementById('answerInput').disabled = true;
                document.getElementById('submitAnswer').disabled = true;
            } else {
                alert('Incorrect answer. Try again!');
            }
        }

        function resetChallenge() {
            document.getElementById('answerInput').value = '';
            document.getElementById('startChallenge').disabled = false;
            document.getElementById('answerInput').disabled = true;
            document.getElementById('submitAnswer').disabled = true;
            clearInterval(timer);
        }

        function simulateTeamMembers() {
            const teamMembers = document.getElementById('teamMembers');
            const numMembers = Math.floor(Math.random() * 2) + 3; // 3-4 team members
            
            teamMembers.innerHTML = `
                <div class="bg-gray-700 rounded p-4">
                    <div class="w-3 h-3 bg-green-500 rounded-full mb-2"></div>
                    <p class="font-bold">You</p>
                    <p class="text-gray-400 text-sm">Team Leader</p>
                </div>
            `;
            
            for (let i = 1; i < numMembers; i++) {
                const roles = ['Strategist', 'Problem Solver', 'Time Keeper'];
                teamMembers.innerHTML += `
                    <div class="bg-gray-700 rounded p-4">
                        <div class="w-3 h-3 bg-green-500 rounded-full mb-2"></div>
                        <p class="font-bold">Player ${i + 1}</p>
                        <p class="text-gray-400 text-sm">${roles[i - 1]}</p>
                    </div>
                `;
            }
        }

        document.getElementById('startChallenge').addEventListener('click', startChallenge);
        document.getElementById('submitAnswer').addEventListener('click', checkAnswer);
        document.getElementById('answerInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Initialize the game
        window.addEventListener('load', () => {
            simulateTeamMembers();
        });

        // How to Play Modal
        const howToPlayBtn = document.getElementById('howToPlay');
        const howToPlayModal = document.getElementById('howToPlayModal');
        const closeHowToPlay = document.getElementById('closeHowToPlay');

        howToPlayBtn.addEventListener('click', () => {
            howToPlayModal.classList.remove('hidden');
        });

        closeHowToPlay.addEventListener('click', () => {
            howToPlayModal.classList.add('hidden');
        });

        howToPlayModal.addEventListener('click', (e) => {
            if (e.target === howToPlayModal) {
                howToPlayModal.classList.add('hidden');
            }
        });
    </script>
</body>
</html>
